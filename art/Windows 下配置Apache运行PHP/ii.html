<!DOCTYPE html><head><meta charset='utf-8'><style type='text/css'>
<!--
    body{border-collapse: collapse;}a.anchor,ol,ul{padding-left:30px}dl dt,table tr th{font-weight:700}body{font-family:Helvetica,arial,sans-serif;font-size:14px;line-height:1.6;background-color:#fff;padding:30px}body>:first-child{margin-top:0!important}h1 p,h2 p,h3 p,h4 p,h5 p,h6 p,ol :first-child,ul :first-child{margin-top:0}body>:last-child{margin-bottom:0!important}blockquote>:last-child,dl dd>:last-child,dl dt>:last-child,ol :last-child,table tr td :last-child,table tr th :last-child,ul :last-child{margin-bottom:0}a{color:#4183C4}a.absent{color:#c00}h1,h2{color:#000}blockquote,h6{color:#777}a.anchor{display:block;margin-left:-30px;cursor:pointer;position:absolute;top:0;left:0;bottom:0}dl,dl dt,dl dt:first-child,hr,table,table tr{padding:0}h1,h2,h3,h4,h5,h6{margin:20px 0 10px;padding:0;font-weight:700;-webkit-font-smoothing:antialiased;cursor:text;position:relative}h1:hover a.anchor,h2:hover a.anchor,h3:hover a.anchor,h4:hover a.anchor,h5:hover a.anchor,h6:hover a.anchor{background:url(../../images/modules/styleguide/para.png) 10px center no-repeat;text-decoration:none}code,table tr:nth-child(2n),tt{background-color:#f8f8f8}h1 code,h1 tt,h2 code,h2 tt,h3 code,h3 tt,h4 code,h4 tt,h5 code,h5 tt,h6 code,h6 tt{font-size:inherit}h1{font-size:28px}h2{font-size:24px;border-bottom:1px solid #ccc}h3{font-size:18px}h4{font-size:16px}dl dt,h5,h6{font-size:14px}blockquote,dl,li,ol,p,pre,table,ul{margin:15px 0}hr{background:url(../../images/modules/pulls/dirty-shade.png) repeat-x;border:0;color:#ccc;height:4px}a:first-child h1,a:first-child h2,a:first-child h3,a:first-child h4,a:first-child h5,a:first-child h6,body>h1:first-child,body>h1:first-child+h2,body>h2:first-child,body>h3:first-child,body>h4:first-child,body>h5:first-child,body>h6:first-child{margin-top:0;padding-top:0}table tr td,table tr th{border:1px solid #ccc;text-align:left;margin:0;padding:6px 13px}li p.first{display:inline-block}dl dt{font-style:italic;margin:15px 0 5px}blockquote>:first-child,dl dd>:first-child,dl dt>:first-child,table tr td :first-child,table tr th :first-child{margin-top:0}dl dd{margin:0 0 15px;padding:0 15px}blockquote{border-left:4px solid #ddd;padding:0 15px}table tr{border-top:1px solid #ccc;background-color:#fff;margin:0}img{max-width:100%}span.frame{display:block;overflow:hidden}span.frame>span{border:1px solid #ddd;display:block;float:left;overflow:hidden;margin:13px 0 0;padding:7px;width:auto}span.frame span img{display:block;float:left}span.frame span span{clear:both;color:#333;display:block;padding:5px 0 0}span.align-center{display:block;overflow:hidden;clear:both}span.align-center>span{display:block;overflow:hidden;margin:13px auto 0;text-align:center}span.align-center span img{margin:0 auto;text-align:center}span.align-right{display:block;overflow:hidden;clear:both}span.align-right>span{display:block;overflow:hidden;margin:13px 0 0;text-align:right}span.align-right span img{margin:0;text-align:right}span.float-left{display:block;margin-right:13px;overflow:hidden;float:left}span.float-left span{margin:13px 0 0}span.float-right{display:block;margin-left:13px;overflow:hidden;float:right}span.float-right>span{display:block;overflow:hidden;margin:13px auto 0;text-align:right}code,tt{margin:0 2px;padding:0 5px;white-space:nowrap;border:1px solid #eaeaea;border-radius:3px}pre code{margin:0;padding:0;white-space:pre;background:0 0}.highlight pre,pre{background-color:#f8f8f8;border:1px solid #ccc;font-size:13px;line-height:19px;overflow:auto;padding:6px 10px;border-radius:3px}pre code,pre tt{background-color:transparent;border:none}
    --></style></head><body>
    <h1 id="windows-apache-php">Windows 下配置Apache运行PHP</h1>
    <h2 id="-">首先需要准备的文件</h2>
    <ul>
    <li><p>你的电脑需要具备PHP开发环境，如果不具备，可以参考我的上一篇文章<a href="../VS Code配置PHP/">VS Code配置PHP</a></p>
    </li>
    <li><p>Apache 下载地址 <a href="https://www.apachehaus.com/cgi-bin/download.plx">https://www.apachehaus.com/cgi-bin/download.plx</a>
    <img src="i/17890238-fcede071a77e554f.png" alt="选择你所需要的，如果你不知道需要哪个,那就下第一个">
    我也传了一个蓝奏云，<a href="https://www.lanzous.com/i5cns8b">https://www.lanzous.com/i5cns8b</a></p>
    <h2 id="-">开始配置</h2>
    <p>在解压出来的Apache <code>conf</code>目录下，找到<code>httpd.conf</code>并打开,将<code>Define SRVROOT</code>后改为自己的APache 绝对位置，图片为我的目录位置<img src="i/17890238-181dd59c44f56808.png" alt="">更改<code>serverName</code>如图，图片中默认使用80端口，如需更改，更改即可<img src="i/17890238-e2c7ce25e6867821.png" alt="">
    如果你想指定你编写网页的路径，即Apache打开的默认位置，需要修改<code>DocumentRoot</code>项为指定绝对目录，默认为Apache 下的<code>htdocs</code>目录。比如我修改为<img src="i/17890238-c4a824fe83c0119e.png" alt="">可以更改默认打开的文件，默认为 DocumentRoot 目录下index.html<img src="i/17890238-0ab4b7ca9d523d1e.png" alt=""></p>
    </li>
    </ul>
    <p>然后拉到最下面，将<code>Include conf/extra/httpd-fcgid.conf</code>取消注释，该项待会用来指定PHP目录。如图<img src="i/17890238-7fe827dcea098636.png" alt="">然后我们在extra文件夹下找到<code>httpd-fcgid.conf</code>，将<code>Define PHPLOC</code>后改为自己的PHP绝对路径，如图为我的PHP目录<img src="i/17890238-7d723ca2d208db51.png" alt="">
    目前我就修改了这些，能够很好的满足我的需求，若你还有其他需求，仔细看看配置的注释，说不定会找到答案。</p>
    <ul>
    <li>下面开始安装
    为了方便，将<code>httpd</code>所在的bin目录添加到环境变量
    <img src="i/17890238-5d5daf3243584308.png" alt="添加环境变量">
    使用管理员权限运行powershell 执行如下两条命令，可以将运行powershell所在的目录添加到环境变量
    ```
    $p1=<a href=":SetEnvironmentvariable(&quot;Path&quot;,$p1+" title=";$pwd&quot;,[System.EnvironmentVariableTarget]::Machine">Environment</a>::GetEnvironmentvariable(&quot;Path&quot;, &quot;Machine&quot;)</li>
    </ul>
    <pre><code>&gt;![可以将图中红色部分添加到Path](i/17890238-3a4767e385371851.png)
    
    首先，在powershell中输入`httpd -t`来检查配置是否存在问题，若显示OK，![OK](i/17890238-aecfe56d6c20bfe8.png)
    即可进行安装，输入`httpd -k install`安装Apache，安装完成，`httpd -k start`启动服务,也可以到bin目录下找到ApacheMonitor启动服务、查看服务状态![](i/17890238-4e9fe00379516786.png)
    如果你未更改`DocumentRoot`在浏览器输入`localhost`可以看到![未更改目录](i/17890238-5f02e951e4a62c29.png)
    我更改了目录，并且目录下没有 index.html，会显示`DocumentRoot`目录，如图![](i/17890238-b990fa54350b8418.png)
    ## 测试
    写一个简单的代码![](i/17890238-1220464dc9becc08.png)
    ![测试](i/17890238-c05d5b70addac011.png)
    ![success](i/17890238-6a5aa3e6e1988b31.png)
    可以看到成功执行。现在在就可以在windows下~~愉快的~~写网站了。
    ## 最后附上几个常用命令
    1) 安装apache服务
    </code></pre><p>httpd.exe -k install</p>
    <pre><code>
    2) 指定要安装的服务的名称（适用于电脑上有几个不同的Apache服务设施）
    </code></pre><p>httpd.exe -k install -n &quot;MyServiceName&quot;</p>
    <pre><code>3) 指定服务配置文件的路径和名称
    </code></pre><p>httpd.exe -k install -n &quot;MyServiceName&quot; -f &quot;c:\files\my.conf&quot;</p>
    <pre><code>注：若不使用特殊参数（如httpd.exe -k install），服务名称为Apache2.X，配置文件为conf\httpd.conf
    4) 移除一个Apache服务
    </code></pre><p>httpd.exe -k uninstall</p>
    <pre><code>5) 移除特定的Apache服务
    </code></pre><p>httpd.exe -k uninstall -n &quot;MyServiceName&quot;</p>
    <pre><code>2. 管理Apache服务
    1) 启动已安装的Apache服务
    </code></pre><p>httpd.exe -k start</p>
    <pre><code>2) 停止已安装的Apache服务
    </code></pre><p>httpd.exe -k stop || httpd.exe -k shutdown</p>
    <pre><code>3) 重启已安装的Apache服务(迫使服务重读配置文件，适用于修改配置文件后)
    </code></pre><p>httpd.exe -k restart
    ```</p>
    </body></html>